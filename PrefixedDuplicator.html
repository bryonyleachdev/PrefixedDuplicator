<!DOCTYPE html>
<html>
<head>
  <title>PrefixedDuplicator</title>
  <style>
    h4 {
      margin: 0;
    }

    textarea, 
    #prefixes {
      width: 670px;
      box-sizing: border-box;
    }
    .input-wrapper {
      display: inline-flex;
      align-items: flex-end;
    }
    .clear-btn {
      cursor: pointer;
      border: none;
      background: transparent;
      font-size: 24px;
      line-height: 0.5;
    }
  </style>
</head>
<body>
<h4>PrefixedDuplicator</h4>
<div class="input-wrapper">
  <textarea id="input" rows="8" placeholder="Type or paste lines here"></textarea>
  <button class="clear-btn" onclick="clearBox('input')">×</button>
</div>
<br>
<div class="input-wrapper">
  <input id="prefixes" type="text" placeholder="Prefix(es)">
  <button class="clear-btn" onclick="clearBox('prefixes')">×</button>
</div>
<br>
Eg. dark:,max-sm:,sm:,max-md:,md:,max-lg:,lg:,max-xl:,xl:,max-2xl:,2xl:,group-hover:,<br>
hover:,sm:group-hover:,sm:hover:,md:group-hover:,md:hover:,lg:group-hover:,lg:hover:,<br>
xl:group-hover:,xl:hover:,2xl:group-hover:,2xl:hover:,<br>
max-sm:group-hover:,max-sm:hover:,max-md:group-hover:,max-md:hover:,max-lg:group-hover:,<br>
max-lg:hover:,max-xl:group-hover:,max-xl:hover:,max-2xl:group-hover:,max-2xl:hover:,<br>
dark:group-hover:,dark:hover:,sm:dark:,sm:dark:group-hover:,sm:dark:hover:,<br>
md:dark:,md:dark:group-hover:,md:dark:hover:,lg:dark:,lg:dark:group-hover:,<br>
lg:dark:hover:,xl:group-hover:,xl:hover:,2xl:group-hover:,2xl:hover:,<br>
max-sm:dark:,max-sm:dark:group-hover:,max-sm:dark:hover:,max-md:dark:,<br>
max-md:dark:group-hover:,max-md:dark:hover:,max-lg:dark:,max-lg:dark:group-hover:,<br>
max-lg:dark:hover:,max-xl:dark:,max-xl:dark:group-hover:,max-xl:dark:hover:,<br>
max-2xl:dark:,max-2xl:dark:group-hover:,max-2xl:dark:hover:

<br><br>
<div class="input-wrapper">
  <input id="findText" type="text" placeholder="Find">
  <button class="clear-btn" onclick="clearBox('findText')">×</button>
</div>
<div class="input-wrapper">
  <input id="replaceText" type="text" placeholder="Replace">
  <button class="clear-btn" onclick="clearBox('replaceText')">×</button>
</div>
<br>
<label>
  <input type="checkbox" id="includeOriginal" checked> Include original text
</label>
<br>
<label>
  <input type="checkbox" id="includeIndent" checked> Include indentation
</label>
<br>
<label>
  <input type="radio" name="mode" value="interleafed"> Interleafed
</label>
<label>
  <input type="radio" name="mode" value="batched" checked> Batched Results
</label>
<br><br>
<button onclick="processLines()">Duplicate with Prefixes</button>
<button id="copyBtn" onclick="copyOutput()" style="display:none;">Copy</button>
<pre id="output"></pre>

<script>
function processLines() {
  const prefixes = document.getElementById("prefixes").value
                    .split(",")
                    .map(p => p.trim())
                    .filter(p => p.length > 0);

  let inputText = document.getElementById("input").value.trim();
  const findValue = document.getElementById("findText").value;
  const replaceValue = document.getElementById("replaceText").value;

  // Run find/replace if "find" has content
  if (findValue) {
    const regex = new RegExp(findValue, "g"); // global replace
    inputText = inputText.replace(regex, replaceValue);
  }

  const lines = inputText.split("\n");
  const includeOriginal = document.getElementById("includeOriginal").checked;
  const includeIndent = document.getElementById("includeIndent").checked;
  const mode = document.querySelector('input[name="mode"]:checked').value;

  const indent = includeIndent ? "        " : "";
  let result = [];

  if (mode === "interleafed") {
    result = lines.flatMap(line => {
      const clean = line.trim();
      const withoutQuote = clean.substring(1);
      const prefixed = prefixes.map(prefix => `${indent}"${prefix}${withoutQuote}`);
      return includeOriginal ? [`${indent}${clean}`, ...prefixed] : prefixed;
    });
  } else if (mode === "batched") {
    if (includeOriginal) {
      result.push(...lines.map(line => {
        const clean = line.trim();
        return `${indent}${clean}`;
      }));
    }
    prefixes.forEach(prefix => {
      result.push(...lines.map(line => {
        const clean = line.trim();
        const withoutQuote = clean.substring(1);
        return `${indent}"${prefix}${withoutQuote}`;
      }));
    });
  }

  const outputEl = document.getElementById("output");
  const copyBtn = document.getElementById("copyBtn");
  outputEl.innerText = result.join("\n");

  if (result.length > 0) {
    copyBtn.style.display = "inline-block";
    copyBtn.innerText = "Copy";
  } else {
    copyBtn.style.display = "none";
  }
}

function copyOutput() {
  const output = document.getElementById("output").innerText;
  navigator.clipboard.writeText(output).then(() => {
    const copyBtn = document.getElementById("copyBtn");
    copyBtn.innerText = "Copied!";
  });
}

function clearBox(id) {
  document.getElementById(id).value = "";
}
</script>
</body>
</html>
